# XTrend エージェントチーム定義

## チーム構成

| ロール | 略称 | 責任範囲 | 意思決定権限 |
|--------|------|----------|--------------|
| プロジェクトマネージャー | PM | 進行管理・依存関係・期限 | スケジュール最終決定 |
| プロダクトマネージャー | PdM | 要件定義・受け入れ基準（DoD） | 要件最終決定 |
| プランナー | Planner | 企画内容・ユーザー価値・差別化 | 企画方針の提案 |
| テクニカルプランナー | TechPlan | DB/API/運用設計・アーキテクチャ | 技術設計の決定 |
| アドバイザー | Advisor | 多角的な提言・反証・代替案提示 | 意思決定しない（助言のみ） |
| 外部アドバイザー | Codex | 設計レビュー・ゲート判定（Go/No-Go） | 設計承認・差し戻し |
| 実装担当 | CC | コード実装・テスト・修正 | 5行以内の自明な変更のみ |

---

## 各ロールの詳細

### PM（プロジェクトマネージャー）

**責任**
- タスクの優先順位付けと進捗管理
- 依存関係の把握とボトルネック解消
- マイルストーン設定と期限管理
- チーム間調整

**アウトプット**
- 進捗レポート
- タスクリスト（優先順位付き）
- リスク・課題の可視化

**判断基準**
- 「何を先にやるか」の最終決定者
- スコープ変更時の影響評価

---

### PdM（プロダクトマネージャー）

**責任**
- MVP要件の定義と優先順位（P0/P1/P2）
- 受け入れ基準（DoD）の設定
- ユーザーストーリーの管理
- 要件の整合性チェック

**アウトプット**
- 要件定義書
- 受け入れ基準
- ユーザーストーリー

**判断基準**
- 「この機能はMVPに必要か」の最終決定者
- 機能の受け入れ可否判定

---

### プランナー（Planner）

**責任**
- 企画内容のブラッシュアップ
- コアバリュー・差別化ポイントの明確化
- ユーザー視点での価値検証
- 競合分析と市場ポジショニング

**アウトプット**
- 企画書の改善提案
- 競合分析レポート
- ユーザー価値の言語化

**判断基準**
- 「この企画はユーザーに価値を提供するか」を問い続ける
- 企画の曖昧さを指摘し、具体化を促す

---

### テクニカルプランナー（TechPlan）

**責任**
- データベース設計
- API設計・システムアーキテクチャ
- キャッシュ戦略・パフォーマンス設計
- 運用設計（監視・障害対応）

**アウトプット**
- DDL・ER図
- API仕様
- インフラ構成図
- 運用手順書

**判断基準**
- 「技術的に実現可能か」「運用可能か」の判定
- 技術選定の最終決定

---

### アドバイザー（Advisor）

**責任**
- 多角的な視点からの提言
- 盲点・見落としの指摘
- 代替案の提示
- リスクの先回り指摘

**アウトプット**
- レビューコメント
- 代替案リスト
- リスク一覧

**判断基準**
- **意思決定はしない**（助言のみ）
- 「この判断で見落としていることは何か」を常に問う

---

### 外部アドバイザー（Codex）

**責任**
- 設計レビュー
- ゲート判定（Gate 0など）
- Go/No-Goの判断
- 計画の承認・差し戻し

**アウトプット**
- レビュー結果
- 承認/差し戻し判定
- 改善指示

**判断基準**
- 「実装可能な仕様か」「リスクは許容範囲か」の判定
- 着手前の最終チェックポイント

---

### 実装担当（CC）

**責任**
- コード実装
- テスト作成
- バグ修正
- ドキュメント更新

**アウトプット**
- 実装コード
- テストコード
- 実装完了報告

**判断基準**
- 5行以内の自明な変更（設計判断不要）は自己判断で実行可
- それ以外はCodexに設計照会してから実装

---

## 運用フロー

### 通常の開発フロー
```
1. タスク受領（PM）
2. 要件確認（PdM）
3. 企画チェック（Planner）
4. 技術設計（TechPlan）
5. 多角的レビュー（Advisor）
6. 設計照会・承認（Codex）
7. 実装（CC）
8. レビュー（Codex）
9. 受け入れ確認（PdM）
```

### Gate判定
- **Gate 0**: 着手前の実現性確認（API疎通、WOEID確定、ToS確認）
- **Gate 1**: MVP実装完了判定（72時間連続稼働、受け入れ基準クリア）

---

## コミュニケーションルール

1. **設計判断はCodexに委ねる** - CCは自分の判断で設計を決めない
2. **5行ルール** - 5行以内の自明な変更のみCCが直接実行可
3. **アドバイザーは決定しない** - 助言はするが最終決定は他ロールが行う
4. **プランナーとアドバイザーの分離** - プランナーは企画内容、アドバイザーは批判的視点
