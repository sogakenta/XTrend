# 開発ルール

## 重要：開発環境と本番環境の統一

**開発環境を本番と同じにする**

- 開発環境用のバイパスやワイルドカードは作らない
- セキュリティホールを作らない
- フロントエンドから直接Supabaseにアクセスしない、必ずNext.jsを経由
- 表に出さない、セキュリティを最優先

## CSRFトークン処理

- 既存のミドルウェアを活用する
- `withAuth`と`withCORS`を正しく使用
- サーバーサイドでのみCSRF処理を実行

## エラー対応手順

1. 原因の特定
2. 修正の道筋を報告
3. OKが出てから修正実行

## 禁止事項

- 開発環境用のバイパス作成
- ワイルドカード設定（`*`）の使用
- フロントエンドからの直接DB/Auth接続